<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ã‚·ãƒ£ã‚«ã‚·ãƒ£ã‚«ã‚¢ãƒ—ãƒªå®Œæˆç‰ˆ</title>
    <style>
        /* ç”»é¢ã‚’å›ºå®šã—ã¦ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã•ã›ãªã„ */
        html, body { 
            margin: 0; padding: 0; width: 100%; height: 100%; 
            overflow: hidden; position: fixed; background: #e0e0e0;
        }
        #emoji {
            font-size: 80px; position: absolute;
            will-change: transform; /* å‹•ãã‚’ã‚¹ãƒ ãƒ¼ã‚ºã«ã™ã‚‹ãŠã¾ã˜ãªã„ */
        }
        button {
            position: absolute; top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            padding: 20px 40px; font-size: 20px; z-index: 100;
            border-radius: 50px; border: none; background: #333; color: white;
        }
    </style>
</head>
<body>

    <button id="startBtn">ã‚·ãƒ£ã‚«ã‚·ãƒ£ã‚«é–‹å§‹ï¼ ğŸ”¥</button>
    <div id="emoji">ğŸ±</div>

    <script>
        let px = window.innerWidth / 2;
        let py = window.innerHeight / 2;
        let vx = 0; // æ¨ªæ–¹å‘ã®é€Ÿåº¦
        let vy = 0; // ç¸¦æ–¹å‘ã®é€Ÿåº¦
        
        const emoji = document.getElementById('emoji');
        const btn = document.getElementById('startBtn');

        btn.addEventListener('click', () => {
            if (typeof DeviceMotionEvent.requestPermission === 'function') {
                DeviceMotionEvent.requestPermission().then(state => { if (state === 'granted') run(); });
            } else { run(); }
            btn.style.display = 'none';
        });

        function run() {
            // é‡åŠ›ã¨æŒ¯ã‚Šã‚’æ¤œçŸ¥ï¼ˆgravity ã‚’å«ã‚€å€¤ã‚’ä½¿ç”¨ï¼‰
            window.addEventListener("devicemotion", (e) => {
                let ag = e.accelerationIncludingGravity;
                if (!ag.x) return;

                // 1. ã‚¹ãƒãƒ›ã®å‚¾ãã¨æŒ¯ã‚Šã‚’é€Ÿåº¦ã«å¤‰ãˆã‚‹
                vx -= ag.x * 1.5; 
                vy += ag.y * 1.5;
            });

            function update() {
                // 2. æ‘©æ“¦ï¼ˆã ã‚“ã ã‚“æ­¢ã¾ã‚‹ã‚ˆã†ã«ã™ã‚‹ï¼‰
                vx *= 0.95;
                vy *= 0.95;

                px += vx;
                py += vy;

                // 3. å£ã«å½“ãŸã£ãŸã‚‰è·³ã­è¿”ã‚‹
                const size = 80;
                if (px < 0) { px = 0; vx *= -0.8; }
                if (px > window.innerWidth - size) { px = window.innerWidth - size; vx *= -0.8; }
                if (py < 0) { py = 0; vy *= -0.8; }
                if (py > window.innerHeight - size) { py = window.innerHeight - size; vy *= -0.8; }

                emoji.style.transform = `translate(${px}px, ${py}px)`;
                requestAnimationFrame(update); // ã‚¹ãƒ ãƒ¼ã‚ºã«ãƒ«ãƒ¼ãƒ—
            }
            update();
        }
    </script>
</body>
</html>
